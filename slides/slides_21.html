<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Data wrangling with dplyr</title>
    <meta charset="utf-8" />
    <link href="slides_21_files/remark-css-0.0.1/default.css" rel="stylesheet" />
    <link href="slides_21_files/remark-css-0.0.1/robot.css" rel="stylesheet" />
    <link href="slides_21_files/remark-css-0.0.1/robot-fonts.css" rel="stylesheet" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Data wrangling with <code>dplyr</code>
## PLSC30500, Fall 2021

---




&lt;style type="text/css"&gt;
.small-output .remark-code{
  font-size: x-small;
}
&lt;/style&gt;

# The big picture 

Components of a `ggplot`: 

- "tidy" data, with observations in rows, attributes in columns
- mapping of attributes to aesthetics (x, y, size, shape, color, transparency, etc)
- geometric objects (`geom`s)

This week: "data wrangling" to prepare data for plotting (and analysis).


---

class: inverse, middle, center

# Getting data into `R`

---

# Getting data into `R` (and `RStudio`)

An interactive option: `Import Dataset` button in `Environment` pane of `RStudio`

--

But note it's showing you the code it's using! 

(Live coding example.)

---

# Getting data into `R` (cont'd)

Most commonly used functions: 

- `read_csv()` and `read_rds()` in `readr` (`tidyverse`)
- `readstata13::read.dta13()` for Stata files (`.dta`)
- `readxl::read_excel()` for Excel files (`.xls`, `.xlsx`)
- `load()` in base R for "R objects"

All require "path" to file as argument. 

--

Sometimes data is a package, e.g. `babynames`, `gapminder`, `vdemdata` 

--

See Chapter 11 of R4DS and "Data Import" cheatsheet.

---

class: inverse, middle, center

# Some key data wrangling tools in `dplyr`: `select()`, `filter()`, `group_by()`, `summarize()`, `mutate()`

---

# Load V-Dem dataset

1. `install.packages("devtools")`
1. `devtools::install_github("vdeminstitute/vdemdata")`
1. `library(vdemdata)`




Now by typing `vdem` you can access the dataset.

???

NB: Maybe we should provide an alternative way to load in case their github goes down or something.

---

# Getting a feel for the data (1)

`vdem` is big! 


```r
dim(vdem)
```

```
## [1] 27192  4176
```

--

Typing `vdem` is overwhelming and unhelpful; `View(vdem)` better but takes a while to load. 

---

#### Look at column names: 

.small-output[

```r
names(vdem)  # colnames(vdem) also works
```

```
##    [1] "country_name"                "country_text_id"            
##    [3] "country_id"                  "year"                       
##    [5] "historical_date"             "project"                    
##    [7] "historical"                  "histname"                   
##    [9] "codingstart"                 "codingend"                  
##   [11] "codingstart_contemp"         "codingend_contemp"          
##   [13] "codingstart_hist"            "codingend_hist"             
##   [15] "gapstart1"                   "gapstart2"                  
##   [17] "gapstart3"                   "gapend1"                    
##   [19] "gapend2"                     "gapend3"                    
##   [21] "gap_index"                   "COWcode"                    
##   [23] "v2x_polyarchy"               "v2x_polyarchy_codelow"      
##   [25] "v2x_polyarchy_codehigh"      "v2x_polyarchy_sd"           
##   [27] "v2x_libdem"                  "v2x_libdem_codelow"         
##   [29] "v2x_libdem_codehigh"         "v2x_libdem_sd"              
##   [31] "v2x_partipdem"               "v2x_partipdem_codelow"      
##   [33] "v2x_partipdem_codehigh"      "v2x_partipdem_sd"           
##   [35] "v2x_delibdem"                "v2x_delibdem_codelow"       
##   [37] "v2x_delibdem_codehigh"       "v2x_delibdem_sd"            
##   [39] "v2x_egaldem"                 "v2x_egaldem_codelow"        
##   [41] "v2x_egaldem_codehigh"        "v2x_egaldem_sd"             
##   [43] "v2x_api"                     "v2x_api_codelow"            
##   [45] "v2x_api_codehigh"            "v2x_api_sd"                 
##   [47] "v2x_mpi"                     "v2x_mpi_codelow"            
##   [49] "v2x_mpi_codehigh"            "v2x_mpi_sd"                 
##   [51] "v2x_freexp_altinf"           "v2x_freexp_altinf_codelow"  
##   [53] "v2x_freexp_altinf_codehigh"  "v2x_freexp_altinf_sd"       
##   [55] "v2x_frassoc_thick"           "v2x_frassoc_thick_codelow"  
##   [57] "v2x_frassoc_thick_codehigh"  "v2x_frassoc_thick_sd"       
##   [59] "v2x_suffr"                   "v2xel_frefair"              
##   [61] "v2xel_frefair_codelow"       "v2xel_frefair_codehigh"     
##   [63] "v2xel_frefair_sd"            "v2x_elecoff"                
##   [65] "v2x_liberal"                 "v2x_liberal_codelow"        
##   [67] "v2x_liberal_codehigh"        "v2x_liberal_sd"             
##   [69] "v2xcl_rol"                   "v2xcl_rol_codelow"          
##   [71] "v2xcl_rol_codehigh"          "v2xcl_rol_sd"               
##   [73] "v2x_jucon"                   "v2x_jucon_codelow"          
##   [75] "v2x_jucon_codehigh"          "v2x_jucon_sd"               
##   [77] "v2xlg_legcon"                "v2xlg_legcon_codelow"       
##   [79] "v2xlg_legcon_codehigh"       "v2xlg_legcon_sd"            
##   [81] "v2x_partip"                  "v2x_partip_codelow"         
##   [83] "v2x_partip_codehigh"         "v2x_partip_sd"              
##   [85] "v2x_cspart"                  "v2x_cspart_codelow"         
##   [87] "v2x_cspart_codehigh"         "v2x_cspart_sd"              
##   [89] "v2xdd_dd"                    "v2xel_locelec"              
##   [91] "v2xel_locelec_codelow"       "v2xel_locelec_codehigh"     
##   [93] "v2xel_locelec_sd"            "v2xel_regelec"              
##   [95] "v2xel_regelec_codelow"       "v2xel_regelec_codehigh"     
##   [97] "v2xel_regelec_sd"            "v2xdl_delib"                
##   [99] "v2xdl_delib_codelow"         "v2xdl_delib_codehigh"       
##  [101] "v2xdl_delib_sd"              "v2x_egal"                   
##  [103] "v2x_egal_codelow"            "v2x_egal_codehigh"          
##  [105] "v2x_egal_sd"                 "v2xeg_eqprotec"             
##  [107] "v2xeg_eqprotec_codelow"      "v2xeg_eqprotec_codehigh"    
##  [109] "v2xeg_eqprotec_sd"           "v2xeg_eqaccess"             
##  [111] "v2xeg_eqaccess_codelow"      "v2xeg_eqaccess_codehigh"    
##  [113] "v2xeg_eqaccess_sd"           "v2xeg_eqdr"                 
##  [115] "v2xeg_eqdr_codelow"          "v2xeg_eqdr_codehigh"        
##  [117] "v2xeg_eqdr_sd"               "v2eltype_0"                 
##  [119] "v2eltype_1"                  "v2eltype_2"                 
##  [121] "v2eltype_3"                  "v2eltype_4"                 
##  [123] "v2eltype_5"                  "v2eltype_6"                 
##  [125] "v2eltype_7"                  "v2eltype_8"                 
##  [127] "v2eltype_9"                  "v2asuffrage"                
##  [129] "v2elage"                     "v2elcomvot"                 
##  [131] "v2elfemrst"                  "v2elgvsuflvl"               
##  [133] "v2elsuffrage"                "v2elwestmon"                
##  [135] "v2fsuffrage"                 "v2msuffrage"                
##  [137] "v2eldonate"                  "v2eldonate_codelow"         
##  [139] "v2eldonate_codehigh"         "v2eldonate_sd"              
##  [141] "v2eldonate_osp"              "v2eldonate_osp_codelow"     
##  [143] "v2eldonate_osp_codehigh"     "v2eldonate_osp_sd"          
##  [145] "v2eldonate_ord"              "v2eldonate_ord_codelow"     
##  [147] "v2eldonate_ord_codehigh"     "v2eldonate_mean"            
##  [149] "v2eldonate_nr"               "v2elpubfin"                 
##  [151] "v2elpubfin_codelow"          "v2elpubfin_codehigh"        
##  [153] "v2elpubfin_sd"               "v2elpubfin_osp"             
##  [155] "v2elpubfin_osp_codelow"      "v2elpubfin_osp_codehigh"    
##  [157] "v2elpubfin_osp_sd"           "v2elpubfin_ord"             
##  [159] "v2elpubfin_ord_codelow"      "v2elpubfin_ord_codehigh"    
##  [161] "v2elpubfin_mean"             "v2elpubfin_nr"              
##  [163] "v2elembaut"                  "v2elembaut_codelow"         
##  [165] "v2elembaut_codehigh"         "v2elembaut_sd"              
##  [167] "v2elembaut_osp"              "v2elembaut_osp_codelow"     
##  [169] "v2elembaut_osp_codehigh"     "v2elembaut_osp_sd"          
##  [171] "v2elembaut_ord"              "v2elembaut_ord_codelow"     
##  [173] "v2elembaut_ord_codehigh"     "v2elembaut_mean"            
##  [175] "v2elembaut_nr"               "v2elembcap"                 
##  [177] "v2elembcap_codelow"          "v2elembcap_codehigh"        
##  [179] "v2elembcap_sd"               "v2elembcap_osp"             
##  [181] "v2elembcap_osp_codelow"      "v2elembcap_osp_codehigh"    
##  [183] "v2elembcap_osp_sd"           "v2elembcap_ord"             
##  [185] "v2elembcap_ord_codelow"      "v2elembcap_ord_codehigh"    
##  [187] "v2elembcap_mean"             "v2elembcap_nr"              
##  [189] "v2elmulpar"                  "v2elmulpar_codelow"         
##  [191] "v2elmulpar_codehigh"         "v2elmulpar_sd"              
##  [193] "v2elmulpar_osp"              "v2elmulpar_osp_codelow"     
##  [195] "v2elmulpar_osp_codehigh"     "v2elmulpar_osp_sd"          
##  [197] "v2elmulpar_ord"              "v2elmulpar_ord_codelow"     
##  [199] "v2elmulpar_ord_codehigh"     "v2elmulpar_mean"            
##  [201] "v2elmulpar_nr"               "v2elrgstry"                 
##  [203] "v2elrgstry_codelow"          "v2elrgstry_codehigh"        
##  [205] "v2elrgstry_sd"               "v2elrgstry_osp"             
##  [207] "v2elrgstry_osp_codelow"      "v2elrgstry_osp_codehigh"    
##  [209] "v2elrgstry_osp_sd"           "v2elrgstry_ord"             
##  [211] "v2elrgstry_ord_codelow"      "v2elrgstry_ord_codehigh"    
##  [213] "v2elrgstry_mean"             "v2elrgstry_nr"              
##  [215] "v2elvotbuy"                  "v2elvotbuy_codelow"         
##  [217] "v2elvotbuy_codehigh"         "v2elvotbuy_sd"              
##  [219] "v2elvotbuy_osp"              "v2elvotbuy_osp_codelow"     
##  [221] "v2elvotbuy_osp_codehigh"     "v2elvotbuy_osp_sd"          
##  [223] "v2elvotbuy_ord"              "v2elvotbuy_ord_codelow"     
##  [225] "v2elvotbuy_ord_codehigh"     "v2elvotbuy_mean"            
##  [227] "v2elvotbuy_nr"               "v2elirreg"                  
##  [229] "v2elirreg_codelow"           "v2elirreg_codehigh"         
##  [231] "v2elirreg_sd"                "v2elirreg_osp"              
##  [233] "v2elirreg_osp_codelow"       "v2elirreg_osp_codehigh"     
##  [235] "v2elirreg_osp_sd"            "v2elirreg_ord"              
##  [237] "v2elirreg_ord_codelow"       "v2elirreg_ord_codehigh"     
##  [239] "v2elirreg_mean"              "v2elirreg_nr"               
##  [241] "v2elintim"                   "v2elintim_codelow"          
##  [243] "v2elintim_codehigh"          "v2elintim_sd"               
##  [245] "v2elintim_osp"               "v2elintim_osp_codelow"      
##  [247] "v2elintim_osp_codehigh"      "v2elintim_osp_sd"           
##  [249] "v2elintim_ord"               "v2elintim_ord_codelow"      
##  [251] "v2elintim_ord_codehigh"      "v2elintim_mean"             
##  [253] "v2elintim_nr"                "v2elpeace"                  
##  [255] "v2elpeace_codelow"           "v2elpeace_codehigh"         
##  [257] "v2elpeace_sd"                "v2elpeace_osp"              
##  [259] "v2elpeace_osp_codelow"       "v2elpeace_osp_codehigh"     
##  [261] "v2elpeace_osp_sd"            "v2elpeace_ord"              
##  [263] "v2elpeace_ord_codelow"       "v2elpeace_ord_codehigh"     
##  [265] "v2elpeace_mean"              "v2elpeace_nr"               
##  [267] "v2elboycot"                  "v2elboycot_codelow"         
##  [269] "v2elboycot_codehigh"         "v2elboycot_sd"              
##  [271] "v2elboycot_osp"              "v2elboycot_osp_codelow"     
##  [273] "v2elboycot_osp_codehigh"     "v2elboycot_osp_sd"          
##  [275] "v2elboycot_ord"              "v2elboycot_ord_codelow"     
##  [277] "v2elboycot_ord_codehigh"     "v2elboycot_mean"            
##  [279] "v2elboycot_nr"               "v2elfrcamp"                 
##  [281] "v2elfrcamp_codelow"          "v2elfrcamp_codehigh"        
##  [283] "v2elfrcamp_sd"               "v2elfrcamp_osp"             
##  [285] "v2elfrcamp_osp_codelow"      "v2elfrcamp_osp_codehigh"    
##  [287] "v2elfrcamp_osp_sd"           "v2elfrcamp_ord"             
##  [289] "v2elfrcamp_ord_codelow"      "v2elfrcamp_ord_codehigh"    
##  [291] "v2elfrcamp_mean"             "v2elfrcamp_nr"              
##  [293] "v2elpdcamp"                  "v2elpdcamp_codelow"         
##  [295] "v2elpdcamp_codehigh"         "v2elpdcamp_sd"              
##  [297] "v2elpdcamp_osp"              "v2elpdcamp_osp_codelow"     
##  [299] "v2elpdcamp_osp_codehigh"     "v2elpdcamp_osp_sd"          
##  [301] "v2elpdcamp_ord"              "v2elpdcamp_ord_codelow"     
##  [303] "v2elpdcamp_ord_codehigh"     "v2elpdcamp_mean"            
##  [305] "v2elpdcamp_nr"               "v2elpaidig"                 
##  [307] "v2elpaidig_codelow"          "v2elpaidig_codehigh"        
##  [309] "v2elpaidig_sd"               "v2elpaidig_osp"             
##  [311] "v2elpaidig_osp_codelow"      "v2elpaidig_osp_codehigh"    
##  [313] "v2elpaidig_osp_sd"           "v2elpaidig_ord"             
##  [315] "v2elpaidig_ord_codelow"      "v2elpaidig_ord_codehigh"    
##  [317] "v2elpaidig_mean"             "v2elpaidig_nr"              
##  [319] "v2elfrfair"                  "v2elfrfair_codelow"         
##  [321] "v2elfrfair_codehigh"         "v2elfrfair_sd"              
##  [323] "v2elfrfair_osp"              "v2elfrfair_osp_codelow"     
##  [325] "v2elfrfair_osp_codehigh"     "v2elfrfair_osp_sd"          
##  [327] "v2elfrfair_ord"              "v2elfrfair_ord_codelow"     
##  [329] "v2elfrfair_ord_codehigh"     "v2elfrfair_mean"            
##  [331] "v2elfrfair_nr"               "v2eldommon"                 
##  [333] "v2elintmon"                  "v2elmonden"                 
##  [335] "v2elmonref"                  "v2elrstrct"                 
##  [337] "v2elaccept"                  "v2elaccept_codelow"         
##  [339] "v2elaccept_codehigh"         "v2elaccept_sd"              
##  [341] "v2elaccept_osp"              "v2elaccept_osp_codelow"     
##  [343] "v2elaccept_osp_codehigh"     "v2elaccept_osp_sd"          
##  [345] "v2elaccept_ord"              "v2elaccept_ord_codelow"     
##  [347] "v2elaccept_ord_codehigh"     "v2elaccept_mean"            
##  [349] "v2elaccept_nr"               "v2elasmoff"                 
##  [351] "v2elasmoff_codelow"          "v2elasmoff_codehigh"        
##  [353] "v2elasmoff_sd"               "v2elasmoff_osp"             
##  [355] "v2elasmoff_osp_codelow"      "v2elasmoff_osp_codehigh"    
##  [357] "v2elasmoff_osp_sd"           "v2elasmoff_ord"             
##  [359] "v2elasmoff_ord_codelow"      "v2elasmoff_ord_codehigh"    
##  [361] "v2elasmoff_mean"             "v2elasmoff_nr"              
##  [363] "v2eltrnout"                  "v2elvaptrn"                 
##  [365] "v2lpname"                    "v2slpname"                  
##  [367] "v2tlpname"                   "v2elprescons"               
##  [369] "v2elprescumul"               "v2elrsthog"                 
##  [371] "v2elrsthos"                  "v2elturnhog"                
##  [373] "v2elturnhos"                 "v2eltvrexo"                 
##  [375] "v2elvotlrg"                  "v2elvotsml"                 
##  [377] "v2ellocons"                  "v2ellocumul"                
##  [379] "v2elloeldm"                  "v2elloelsy"                 
##  [381] "v2elloseat"                  "v2ellostlg"                 
##  [383] "v2ellostsl"                  "v2ellostsm"                 
##  [385] "v2ellostss"                  "v2ellosttm"                 
##  [387] "v2ellostts"                  "v2ellovtlg"                 
##  [389] "v2ellovtsm"                  "v2ellovttm"                 
##  [391] "v2elparlel"                  "v2elthresh"                 
##  [393] "v2eltvrig"                   "v2elreggov"                 
##  [395] "v2elregnam"                  "v2elsrgel"                  
##  [397] "v2elrgpwr"                   "v2elrgpwr_codelow"          
##  [399] "v2elrgpwr_codehigh"          "v2elrgpwr_sd"               
##  [401] "v2elrgpwr_osp"               "v2elrgpwr_osp_codelow"      
##  [403] "v2elrgpwr_osp_codehigh"      "v2elrgpwr_osp_sd"           
##  [405] "v2elrgpwr_ord"               "v2elrgpwr_ord_codelow"      
##  [407] "v2elrgpwr_ord_codehigh"      "v2elrgpwr_mean"             
##  [409] "v2elrgpwr_nr"                "v2ellocgov"                 
##  [411] "v2ellocnam"                  "v2ellocelc"                 
##  [413] "v2ellocpwr"                  "v2ellocpwr_codelow"         
##  [415] "v2ellocpwr_codehigh"         "v2ellocpwr_sd"              
##  [417] "v2ellocpwr_osp"              "v2ellocpwr_osp_codelow"     
##  [419] "v2ellocpwr_osp_codehigh"     "v2ellocpwr_osp_sd"          
##  [421] "v2ellocpwr_ord"              "v2ellocpwr_ord_codelow"     
##  [423] "v2ellocpwr_ord_codehigh"     "v2ellocpwr_mean"            
##  [425] "v2ellocpwr_nr"               "v2elffelr"                  
##  [427] "v2elffelr_codelow"           "v2elffelr_codehigh"         
##  [429] "v2elffelr_sd"                "v2elffelr_osp"              
##  [431] "v2elffelr_osp_codelow"       "v2elffelr_osp_codehigh"     
##  [433] "v2elffelr_osp_sd"            "v2elffelr_ord"              
##  [435] "v2elffelr_ord_codelow"       "v2elffelr_ord_codehigh"     
##  [437] "v2elffelr_mean"              "v2elffelr_nr"               
##  [439] "v2elffelrbin"                "v2elffelrbin_codelow"       
##  [441] "v2elffelrbin_codehigh"       "v2elffelrbin_sd"            
##  [443] "v2elffelrbin_osp"            "v2elffelrbin_osp_codelow"   
##  [445] "v2elffelrbin_osp_codehigh"   "v2elffelrbin_osp_sd"        
##  [447] "v2elffelrbin_ord"            "v2elffelrbin_ord_codelow"   
##  [449] "v2elffelrbin_ord_codehigh"   "v2elffelrbin_mean"          
##  [451] "v2elffelrbin_nr"             "v2elsnlsff"                 
##  [453] "v2elsnlsff_codelow"          "v2elsnlsff_codehigh"        
##  [455] "v2elsnlsff_sd"               "v2elsnlsff_osp"             
##  [457] "v2elsnlsff_osp_codelow"      "v2elsnlsff_osp_codehigh"    
##  [459] "v2elsnlsff_osp_sd"           "v2elsnlsff_ord"             
##  [461] "v2elsnlsff_ord_codelow"      "v2elsnlsff_ord_codehigh"    
##  [463] "v2elsnlsff_mean"             "v2elsnlsff_nr"              
##  [465] "v2elsnlfc_0"                 "v2elsnlfc_1"                
##  [467] "v2elsnlfc_2"                 "v2elsnlfc_3"                
##  [469] "v2elsnlfc_4"                 "v2elsnlfc_5"                
##  [471] "v2elsnlfc_6"                 "v2elsnlfc_7"                
##  [473] "v2elsnlfc_8"                 "v2elsnlfc_9"                
##  [475] "v2elsnlfc_10"                "v2elsnlfc_11"               
##  [477] "v2elsnlfc_12"                "v2elsnlfc_13"               
##  [479] "v2elsnlfc_14"                "v2elsnlfc_15"               
##  [481] "v2elsnlfc_16"                "v2elsnlfc_17"               
##  [483] "v2elsnlfc_18"                "v2elsnlfc_19"               
##  [485] "v2elsnlfc_20"                "v2elsnlfc_21"               
##  [487] "v2elsnlfc_nr"                "v2elsnmrfc_0"               
##  [489] "v2elsnmrfc_1"                "v2elsnmrfc_2"               
##  [491] "v2elsnmrfc_3"                "v2elsnmrfc_4"               
##  [493] "v2elsnmrfc_5"                "v2elsnmrfc_6"               
##  [495] "v2elsnmrfc_7"                "v2elsnmrfc_8"               
##  [497] "v2elsnmrfc_9"                "v2elsnmrfc_10"              
##  [499] "v2elsnmrfc_11"               "v2elsnmrfc_12"              
##  [501] "v2elsnmrfc_13"               "v2elsnmrfc_14"              
##  [503] "v2elsnmrfc_15"               "v2elsnmrfc_16"              
##  [505] "v2elsnmrfc_17"               "v2elsnmrfc_18"              
##  [507] "v2elsnmrfc_19"               "v2elsnmrfc_20"              
##  [509] "v2elsnmrfc_21"               "v2elsnmrfc_nr"              
##  [511] "v2psbars"                    "v2psbars_codelow"           
##  [513] "v2psbars_codehigh"           "v2psbars_sd"                
##  [515] "v2psbars_osp"                "v2psbars_osp_codelow"       
##  [517] "v2psbars_osp_codehigh"       "v2psbars_osp_sd"            
##  [519] "v2psbars_ord"                "v2psbars_ord_codelow"       
##  [521] "v2psbars_ord_codehigh"       "v2psbars_mean"              
##  [523] "v2psbars_nr"                 "v2psparban"                 
##  [525] "v2psparban_codelow"          "v2psparban_codehigh"        
##  [527] "v2psparban_sd"               "v2psparban_osp"             
##  [529] "v2psparban_osp_codelow"      "v2psparban_osp_codehigh"    
##  [531] "v2psparban_osp_sd"           "v2psparban_ord"             
##  [533] "v2psparban_ord_codelow"      "v2psparban_ord_codehigh"    
##  [535] "v2psparban_mean"             "v2psparban_nr"              
##  [537] "v2psoppaut"                  "v2psoppaut_codelow"         
##  [539] "v2psoppaut_codehigh"         "v2psoppaut_sd"              
##  [541] "v2psoppaut_osp"              "v2psoppaut_osp_codelow"     
##  [543] "v2psoppaut_osp_codehigh"     "v2psoppaut_osp_sd"          
##  [545] "v2psoppaut_ord"              "v2psoppaut_ord_codelow"     
##  [547] "v2psoppaut_ord_codehigh"     "v2psoppaut_mean"            
##  [549] "v2psoppaut_nr"               "v2psorgs"                   
##  [551] "v2psorgs_codelow"            "v2psorgs_codehigh"          
##  [553] "v2psorgs_sd"                 "v2psorgs_osp"               
##  [555] "v2psorgs_osp_codelow"        "v2psorgs_osp_codehigh"      
##  [557] "v2psorgs_osp_sd"             "v2psorgs_ord"               
##  [559] "v2psorgs_ord_codelow"        "v2psorgs_ord_codehigh"      
##  [561] "v2psorgs_mean"               "v2psorgs_nr"                
##  [563] "v2psprbrch"                  "v2psprbrch_codelow"         
##  [565] "v2psprbrch_codehigh"         "v2psprbrch_sd"              
##  [567] "v2psprbrch_osp"              "v2psprbrch_osp_codelow"     
##  [569] "v2psprbrch_osp_codehigh"     "v2psprbrch_osp_sd"          
##  [571] "v2psprbrch_ord"              "v2psprbrch_ord_codelow"     
##  [573] "v2psprbrch_ord_codehigh"     "v2psprbrch_mean"            
##  [575] "v2psprbrch_nr"               "v2psprlnks"                 
##  [577] "v2psprlnks_codelow"          "v2psprlnks_codehigh"        
##  [579] "v2psprlnks_sd"               "v2psprlnks_osp"             
##  [581] "v2psprlnks_osp_codelow"      "v2psprlnks_osp_codehigh"    
##  [583] "v2psprlnks_osp_sd"           "v2psprlnks_ord"             
##  [585] "v2psprlnks_ord_codelow"      "v2psprlnks_ord_codehigh"    
##  [587] "v2psprlnks_mean"             "v2psprlnks_nr"              
##  [589] "v2psplats"                   "v2psplats_codelow"          
##  [591] "v2psplats_codehigh"          "v2psplats_sd"               
##  [593] "v2psplats_osp"               "v2psplats_osp_codelow"      
##  [595] "v2psplats_osp_codehigh"      "v2psplats_osp_sd"           
##  [597] "v2psplats_ord"               "v2psplats_ord_codelow"      
##  [599] "v2psplats_ord_codehigh"      "v2psplats_mean"             
##  [601] "v2psplats_nr"                "v2pscnslnl"                 
##  [603] "v2pscnslnl_codelow"          "v2pscnslnl_codehigh"        
##  [605] "v2pscnslnl_sd"               "v2pscnslnl_osp"             
##  [607] "v2pscnslnl_osp_codelow"      "v2pscnslnl_osp_codehigh"    
##  [609] "v2pscnslnl_osp_sd"           "v2pscnslnl_ord"             
##  [611] "v2pscnslnl_ord_codelow"      "v2pscnslnl_ord_codehigh"    
##  [613] "v2pscnslnl_mean"             "v2pscnslnl_nr"              
##  [615] "v2pscohesv"                  "v2pscohesv_codelow"         
##  [617] "v2pscohesv_codehigh"         "v2pscohesv_sd"              
##  [619] "v2pscohesv_osp"              "v2pscohesv_osp_codelow"     
##  [621] "v2pscohesv_osp_codehigh"     "v2pscohesv_osp_sd"          
##  [623] "v2pscohesv_ord"              "v2pscohesv_ord_codelow"     
##  [625] "v2pscohesv_ord_codehigh"     "v2pscohesv_mean"            
##  [627] "v2pscohesv_nr"               "v2pscomprg"                 
##  [629] "v2pscomprg_codelow"          "v2pscomprg_codehigh"        
##  [631] "v2pscomprg_sd"               "v2pscomprg_osp"             
##  [633] "v2pscomprg_osp_codelow"      "v2pscomprg_osp_codehigh"    
##  [635] "v2pscomprg_osp_sd"           "v2pscomprg_ord"             
##  [637] "v2pscomprg_ord_codelow"      "v2pscomprg_ord_codehigh"    
##  [639] "v2pscomprg_mean"             "v2pscomprg_nr"              
##  [641] "v2psnatpar"                  "v2psnatpar_codelow"         
##  [643] "v2psnatpar_codehigh"         "v2psnatpar_sd"              
##  [645] "v2psnatpar_osp"              "v2psnatpar_osp_codelow"     
##  [647] "v2psnatpar_osp_codehigh"     "v2psnatpar_osp_sd"          
##  [649] "v2psnatpar_ord"              "v2psnatpar_ord_codelow"     
##  [651] "v2psnatpar_ord_codehigh"     "v2psnatpar_mean"            
##  [653] "v2psnatpar_nr"               "v2pssunpar"                 
##  [655] "v2pssunpar_codelow"          "v2pssunpar_codehigh"        
##  [657] "v2pssunpar_sd"               "v2pssunpar_osp"             
##  [659] "v2pssunpar_osp_codelow"      "v2pssunpar_osp_codehigh"    
##  [661] "v2pssunpar_osp_sd"           "v2pssunpar_ord"             
##  [663] "v2pssunpar_ord_codelow"      "v2pssunpar_ord_codehigh"    
##  [665] "v2pssunpar_mean"             "v2pssunpar_nr"              
##  [667] "v2psbantar_0"                "v2psbantar_1"               
##  [669] "v2psbantar_2"                "v2psbantar_3"               
##  [671] "v2psbantar_4"                "v2psbantar_5"               
##  [673] "v2psbantar_nr"               "v2ddlexci"                  
##  [675] "v2ddsignci"                  "v2ddsigpci"                 
##  [677] "v2ddsigdci"                  "v2ddsiglci"                 
##  [679] "v2ddpartci"                  "v2ddapprci"                 
##  [681] "v2ddadmci"                   "v2ddspmci"                  
##  [683] "v2ddthreci"                  "v2ddlexrf"                  
##  [685] "v2ddsignrf"                  "v2ddsigprf"                 
##  [687] "v2ddsigdrf"                  "v2ddsiglrf"                 
##  [689] "v2ddpartrf"                  "v2ddapprrf"                 
##  [691] "v2ddadmrf"                   "v2ddspmrf"                  
##  [693] "v2ddthrerf"                  "v2ddlexor"                  
##  [695] "v2ddpartor"                  "v2ddappor"                  
##  [697] "v2ddadmor"                   "v2ddspmor"                  
##  [699] "v2ddthreor"                  "v2ddlexpl"                  
##  [701] "v2ddpartpl"                  "v2ddapprpl"                 
##  [703] "v2ddadmpl"                   "v2ddspmpl"                  
##  [705] "v2ddthrepl"                  "v2ddyrci"                   
##  [707] "v2ddyrrf"                    "v2ddyror"                   
##  [709] "v2ddyrpl"                    "v2ddyrall"                  
##  [711] "v2ddcredal"                  "v2exnamhos"                 
##  [713] "v2extithos"                  "v2exremhsp"                 
##  [715] "v2exremhsp_codelow"          "v2exremhsp_codehigh"        
##  [717] "v2exremhsp_sd"               "v2exremhsp_osp"             
##  [719] "v2exremhsp_osp_codelow"      "v2exremhsp_osp_codehigh"    
##  [721] "v2exremhsp_osp_sd"           "v2exremhsp_ord"             
##  [723] "v2exremhsp_ord_codelow"      "v2exremhsp_ord_codehigh"    
##  [725] "v2exremhsp_mean"             "v2exremhsp_nr"              
##  [727] "v2exdfdshs"                  "v2exdfdshs_codelow"         
##  [729] "v2exdfdshs_codehigh"         "v2exdfdshs_sd"              
##  [731] "v2exdfdshs_osp"              "v2exdfdshs_osp_codelow"     
##  [733] "v2exdfdshs_osp_codehigh"     "v2exdfdshs_osp_sd"          
##  [735] "v2exdfdshs_ord"              "v2exdfdshs_ord_codelow"     
##  [737] "v2exdfdshs_ord_codehigh"     "v2exdfdshs_mean"            
##  [739] "v2exdfdshs_nr"               "v2exdfcbhs"                 
##  [741] "v2exdfcbhs_codelow"          "v2exdfcbhs_codehigh"        
##  [743] "v2exdfcbhs_sd"               "v2exdfcbhs_osp"             
##  [745] "v2exdfcbhs_osp_codelow"      "v2exdfcbhs_osp_codehigh"    
##  [747] "v2exdfcbhs_osp_sd"           "v2exdfcbhs_ord"             
##  [749] "v2exdfcbhs_ord_codelow"      "v2exdfcbhs_ord_codehigh"    
##  [751] "v2exdfcbhs_mean"             "v2exdfcbhs_nr"              
##  [753] "v2exdfvths"                  "v2exdfvths_codelow"         
##  [755] "v2exdfvths_codehigh"         "v2exdfvths_sd"              
##  [757] "v2exdfvths_osp"              "v2exdfvths_osp_codelow"     
##  [759] "v2exdfvths_osp_codehigh"     "v2exdfvths_osp_sd"          
##  [761] "v2exdfvths_ord"              "v2exdfvths_ord_codelow"     
##  [763] "v2exdfvths_ord_codehigh"     "v2exdfvths_mean"            
##  [765] "v2exdfvths_nr"               "v2exdfdmhs"                 
##  [767] "v2exdfdmhs_codelow"          "v2exdfdmhs_codehigh"        
##  [769] "v2exdfdmhs_sd"               "v2exdfdmhs_osp"             
##  [771] "v2exdfdmhs_osp_codelow"      "v2exdfdmhs_osp_codehigh"    
##  [773] "v2exdfdmhs_osp_sd"           "v2exdfdmhs_ord"             
##  [775] "v2exdfdmhs_ord_codelow"      "v2exdfdmhs_ord_codehigh"    
##  [777] "v2exdfdmhs_mean"             "v2exdfdmhs_nr"              
##  [779] "v2exdfpphs"                  "v2exdfpphs_codelow"         
##  [781] "v2exdfpphs_codehigh"         "v2exdfpphs_sd"              
##  [783] "v2exdfpphs_osp"              "v2exdfpphs_osp_codelow"     
##  [785] "v2exdfpphs_osp_codehigh"     "v2exdfpphs_osp_sd"          
##  [787] "v2exdfpphs_ord"              "v2exdfpphs_ord_codelow"     
##  [789] "v2exdfpphs_ord_codehigh"     "v2exdfpphs_mean"            
##  [791] "v2exdfpphs_nr"               "v2exhoshog"                 
##  [793] "v2exagehos"                  "v2exaphos"                  
##  [795] "v2ex_elechos"                "v2exfemhos"                 
##  [797] "v2exfxtmhs"                  "v2expathhs"                 
##  [799] "v2exctlhs_0"                 "v2exctlhs_1"                
##  [801] "v2exctlhs_2"                 "v2exctlhs_3"                
##  [803] "v2exctlhs_4"                 "v2exctlhs_5"                
##  [805] "v2exctlhs_6"                 "v2exctlhs_7"                
##  [807] "v2exctlhs_nr"                "v2exdeathos"                
##  [809] "v2exdfcbhs_rec"              "v2exdfcbhs_rec_codelow"     
##  [811] "v2exdfcbhs_rec_codehigh"     "v2exdfcbhs_rec_sd"          
##  [813] "v2exdfcbhs_rec_osp"          "v2exdfcbhs_rec_osp_codelow" 
##  [815] "v2exdfcbhs_rec_osp_codehigh" "v2exdfcbhs_rec_osp_sd"      
##  [817] "v2exdfcbhs_rec_ord"          "v2exdfcbhs_rec_ord_codelow" 
##  [819] "v2exdfcbhs_rec_ord_codehigh" "v2exdfcbhs_rec_mean"        
##  [821] "v2exdfcbhs_rec_nr"           "v2exparhos"                 
##  [823] "v2exrmhsol_0"                "v2exrmhsol_1"               
##  [825] "v2exrmhsol_2"                "v2exrmhsol_3"               
##  [827] "v2exrmhsol_4"                "v2exrmhsol_5"               
##  [829] "v2exrmhsol_6"                "v2exrmhsol_7"               
##  [831] "v2exrmhsol_nr"               "v2exnamhog"                 
##  [833] "v2extithog"                  "v2exremhog"                 
##  [835] "v2exremhog_codelow"          "v2exremhog_codehigh"        
##  [837] "v2exremhog_sd"               "v2exremhog_osp"             
##  [839] "v2exremhog_osp_codelow"      "v2exremhog_osp_codehigh"    
##  [841] "v2exremhog_osp_sd"           "v2exremhog_ord"             
##  [843] "v2exremhog_ord_codelow"      "v2exremhog_ord_codehigh"    
##  [845] "v2exremhog_mean"             "v2exremhog_nr"              
##  [847] "v2exdjdshg"                  "v2exdjdshg_codelow"         
##  [849] "v2exdjdshg_codehigh"         "v2exdjdshg_sd"              
##  [851] "v2exdjdshg_osp"              "v2exdjdshg_osp_codelow"     
##  [853] "v2exdjdshg_osp_codehigh"     "v2exdjdshg_osp_sd"          
##  [855] "v2exdjdshg_ord"              "v2exdjdshg_ord_codelow"     
##  [857] "v2exdjdshg_ord_codehigh"     "v2exdjdshg_mean"            
##  [859] "v2exdjdshg_nr"               "v2exdjcbhg"                 
##  [861] "v2exdjcbhg_codelow"          "v2exdjcbhg_codehigh"        
##  [863] "v2exdjcbhg_sd"               "v2exdjcbhg_osp"             
##  [865] "v2exdjcbhg_osp_codelow"      "v2exdjcbhg_osp_codehigh"    
##  [867] "v2exdjcbhg_osp_sd"           "v2exdjcbhg_ord"             
##  [869] "v2exdjcbhg_ord_codelow"      "v2exdjcbhg_ord_codehigh"    
##  [871] "v2exdjcbhg_mean"             "v2exdjcbhg_nr"              
##  [873] "v2exdfdshg"                  "v2exdfdshg_codelow"         
##  [875] "v2exdfdshg_codehigh"         "v2exdfdshg_sd"              
##  [877] "v2exdfdshg_osp"              "v2exdfdshg_osp_codelow"     
##  [879] "v2exdfdshg_osp_codehigh"     "v2exdfdshg_osp_sd"          
##  [881] "v2exdfdshg_ord"              "v2exdfdshg_ord_codelow"     
##  [883] "v2exdfdshg_ord_codehigh"     "v2exdfdshg_mean"            
##  [885] "v2exdfdshg_nr"               "v2exdfvthg"                 
##  [887] "v2exdfvthg_codelow"          "v2exdfvthg_codehigh"        
##  [889] "v2exdfvthg_sd"               "v2exdfvthg_osp"             
##  [891] "v2exdfvthg_osp_codelow"      "v2exdfvthg_osp_codehigh"    
##  [893] "v2exdfvthg_osp_sd"           "v2exdfvthg_ord"             
##  [895] "v2exdfvthg_ord_codelow"      "v2exdfvthg_ord_codehigh"    
##  [897] "v2exdfvthg_mean"             "v2exdfvthg_nr"              
##  [899] "v2exdfpphg"                  "v2exdfpphg_codelow"         
##  [901] "v2exdfpphg_codehigh"         "v2exdfpphg_sd"              
##  [903] "v2exdfpphg_osp"              "v2exdfpphg_osp_codelow"     
##  [905] "v2exdfpphg_osp_codehigh"     "v2exdfpphg_osp_sd"          
##  [907] "v2exdfpphg_ord"              "v2exdfpphg_ord_codelow"     
##  [909] "v2exdfpphg_ord_codehigh"     "v2exdfpphg_mean"            
##  [911] "v2exdfpphg_nr"               "v2exagehog"                 
##  [913] "v2exaphogp"                  "v2ex_elechog"               
##  [915] "v2exfemhog"                  "v2exfxtmhg"                 
##  [917] "v2ex_hogw"                   "v2ex_hosconhog"             
##  [919] "v2expathhg"                  "v2exctlhg_0"                
##  [921] "v2exctlhg_1"                 "v2exctlhg_2"                
##  [923] "v2exctlhg_3"                 "v2exctlhg_4"                
##  [925] "v2exctlhg_5"                 "v2exctlhg_6"                
##  [927] "v2exctlhg_7"                 "v2exctlhg_8"                
##  [929] "v2exctlhg_nr"                "v2exdeathog"                
##  [931] "v2expothog"                  "v2exrmhgnp_0"               
##  [933] "v2exrmhgnp_1"                "v2exrmhgnp_2"               
##  [935] "v2exrmhgnp_3"                "v2exrmhgnp_4"               
##  [937] "v2exrmhgnp_5"                "v2exrmhgnp_6"               
##  [939] "v2exrmhgnp_7"                "v2exrmhgnp_8"               
##  [941] "v2exrmhgnp_nr"               "v2exrescon"                 
##  [943] "v2exrescon_codelow"          "v2exrescon_codehigh"        
##  [945] "v2exrescon_sd"               "v2exrescon_osp"             
##  [947] "v2exrescon_osp_codelow"      "v2exrescon_osp_codehigh"    
##  [949] "v2exrescon_osp_sd"           "v2exrescon_ord"             
##  [951] "v2exrescon_ord_codelow"      "v2exrescon_ord_codehigh"    
##  [953] "v2exrescon_mean"             "v2exrescon_nr"              
##  [955] "v2exbribe"                   "v2exbribe_codelow"          
##  [957] "v2exbribe_codehigh"          "v2exbribe_sd"               
##  [959] "v2exbribe_osp"               "v2exbribe_osp_codelow"      
##  [961] "v2exbribe_osp_codehigh"      "v2exbribe_osp_sd"           
##  [963] "v2exbribe_ord"               "v2exbribe_ord_codelow"      
##  [965] "v2exbribe_ord_codehigh"      "v2exbribe_mean"             
##  [967] "v2exbribe_nr"                "v2exembez"                  
##  [969] "v2exembez_codelow"           "v2exembez_codehigh"         
##  [971] "v2exembez_sd"                "v2exembez_osp"              
##  [973] "v2exembez_osp_codelow"       "v2exembez_osp_codehigh"     
##  [975] "v2exembez_osp_sd"            "v2exembez_ord"              
##  [977] "v2exembez_ord_codelow"       "v2exembez_ord_codehigh"     
##  [979] "v2exembez_mean"              "v2exembez_nr"               
##  [981] "v2excrptps"                  "v2excrptps_codelow"         
##  [983] "v2excrptps_codehigh"         "v2excrptps_sd"              
##  [985] "v2excrptps_osp"              "v2excrptps_osp_codelow"     
##  [987] "v2excrptps_osp_codehigh"     "v2excrptps_osp_sd"          
##  [989] "v2excrptps_ord"              "v2excrptps_ord_codelow"     
##  [991] "v2excrptps_ord_codehigh"     "v2excrptps_mean"            
##  [993] "v2excrptps_nr"               "v2exthftps"                 
##  [995] "v2exthftps_codelow"          "v2exthftps_codehigh"        
##  [997] "v2exthftps_sd"               "v2exthftps_osp"             
##  [999] "v2exthftps_osp_codelow"      "v2exthftps_osp_codehigh"    
##  [ reached getOption("max.print") -- omitted 3176 entries ]
```
]

---


#### `tibble`s: better viewing

&lt;!-- see
https://github.com/yihui/xaringan/issues/169
for shortcut
--&gt; 

.small-output[

```r
vdem %&gt;% as_tibble()   # "tibble" package is part of "tidyverse"
```

```
## # A tibble: 27,192 x 4,176
##    country_name country_text_id country_id  year historical_date project
##    &lt;chr&gt;        &lt;chr&gt;                &lt;dbl&gt; &lt;dbl&gt; &lt;date&gt;            &lt;dbl&gt;
##  1 Mexico       MEX                      3  1789 1789-12-31            1
##  2 Mexico       MEX                      3  1790 1790-12-31            1
##  3 Mexico       MEX                      3  1791 1791-12-31            1
##  4 Mexico       MEX                      3  1792 1792-12-31            1
##  5 Mexico       MEX                      3  1793 1793-12-31            1
##  6 Mexico       MEX                      3  1794 1794-12-31            1
##  7 Mexico       MEX                      3  1795 1795-12-31            1
##  8 Mexico       MEX                      3  1796 1796-12-31            1
##  9 Mexico       MEX                      3  1797 1797-12-31            1
## 10 Mexico       MEX                      3  1798 1798-12-31            1
## # … with 27,182 more rows, and 4,170 more variables: historical &lt;dbl&gt;,
## #   histname &lt;chr&gt;, codingstart &lt;dbl&gt;, codingend &lt;dbl&gt;,
## #   codingstart_contemp &lt;dbl&gt;, codingend_contemp &lt;dbl&gt;,
## #   codingstart_hist &lt;dbl&gt;, codingend_hist &lt;dbl&gt;, gapstart1 &lt;dbl&gt;,
## #   gapstart2 &lt;dbl&gt;, gapstart3 &lt;dbl&gt;, gapend1 &lt;dbl&gt;, gapend2 &lt;dbl&gt;,
## #   gapend3 &lt;dbl&gt;, gap_index &lt;dbl&gt;, COWcode &lt;dbl&gt;, v2x_polyarchy &lt;dbl&gt;,
## #   v2x_polyarchy_codelow &lt;dbl&gt;, v2x_polyarchy_codehigh &lt;dbl&gt;,
## #   v2x_polyarchy_sd &lt;dbl&gt;, v2x_libdem &lt;dbl&gt;, v2x_libdem_codelow &lt;dbl&gt;,
## #   v2x_libdem_codehigh &lt;dbl&gt;, v2x_libdem_sd &lt;dbl&gt;, v2x_partipdem &lt;dbl&gt;,
## #   v2x_partipdem_codelow &lt;dbl&gt;, v2x_partipdem_codehigh &lt;dbl&gt;,
## #   v2x_partipdem_sd &lt;dbl&gt;, v2x_delibdem &lt;dbl&gt;,
## #   v2x_delibdem_codelow &lt;dbl&gt;, v2x_delibdem_codehigh &lt;dbl&gt;,
## #   v2x_delibdem_sd &lt;dbl&gt;, v2x_egaldem &lt;dbl&gt;, v2x_egaldem_codelow &lt;dbl&gt;,
## #   v2x_egaldem_codehigh &lt;dbl&gt;, v2x_egaldem_sd &lt;dbl&gt;, v2x_api &lt;dbl&gt;,
## #   v2x_api_codelow &lt;dbl&gt;, v2x_api_codehigh &lt;dbl&gt;, v2x_api_sd &lt;dbl&gt;,
## #   v2x_mpi &lt;dbl&gt;, v2x_mpi_codelow &lt;dbl&gt;, v2x_mpi_codehigh &lt;dbl&gt;,
## #   v2x_mpi_sd &lt;dbl&gt;, v2x_freexp_altinf &lt;dbl&gt;,
## #   v2x_freexp_altinf_codelow &lt;dbl&gt;, v2x_freexp_altinf_codehigh &lt;dbl&gt;,
## #   v2x_freexp_altinf_sd &lt;dbl&gt;, v2x_frassoc_thick &lt;dbl&gt;,
## #   v2x_frassoc_thick_codelow &lt;dbl&gt;, v2x_frassoc_thick_codehigh &lt;dbl&gt;,
## #   v2x_frassoc_thick_sd &lt;dbl&gt;, v2x_suffr &lt;dbl&gt;, v2xel_frefair &lt;dbl&gt;,
## #   v2xel_frefair_codelow &lt;dbl&gt;, v2xel_frefair_codehigh &lt;dbl&gt;,
## #   v2xel_frefair_sd &lt;dbl&gt;, v2x_elecoff &lt;dbl&gt;, v2x_liberal &lt;dbl&gt;,
## #   v2x_liberal_codelow &lt;dbl&gt;, v2x_liberal_codehigh &lt;dbl&gt;,
## #   v2x_liberal_sd &lt;dbl&gt;, v2xcl_rol &lt;dbl&gt;, v2xcl_rol_codelow &lt;dbl&gt;,
## #   v2xcl_rol_codehigh &lt;dbl&gt;, v2xcl_rol_sd &lt;dbl&gt;, v2x_jucon &lt;dbl&gt;,
## #   v2x_jucon_codelow &lt;dbl&gt;, v2x_jucon_codehigh &lt;dbl&gt;, v2x_jucon_sd &lt;dbl&gt;,
## #   v2xlg_legcon &lt;dbl&gt;, v2xlg_legcon_codelow &lt;dbl&gt;,
## #   v2xlg_legcon_codehigh &lt;dbl&gt;, v2xlg_legcon_sd &lt;dbl&gt;, v2x_partip &lt;dbl&gt;,
## #   v2x_partip_codelow &lt;dbl&gt;, v2x_partip_codehigh &lt;dbl&gt;,
## #   v2x_partip_sd &lt;dbl&gt;, v2x_cspart &lt;dbl&gt;, v2x_cspart_codelow &lt;dbl&gt;,
## #   v2x_cspart_codehigh &lt;dbl&gt;, v2x_cspart_sd &lt;dbl&gt;, v2xdd_dd &lt;dbl&gt;,
## #   v2xel_locelec &lt;dbl&gt;, v2xel_locelec_codelow &lt;dbl&gt;,
## #   v2xel_locelec_codehigh &lt;dbl&gt;, v2xel_locelec_sd &lt;dbl&gt;,
## #   v2xel_regelec &lt;dbl&gt;, v2xel_regelec_codelow &lt;dbl&gt;,
## #   v2xel_regelec_codehigh &lt;dbl&gt;, v2xel_regelec_sd &lt;dbl&gt;,
## #   v2xdl_delib &lt;dbl&gt;, v2xdl_delib_codelow &lt;dbl&gt;,
## #   v2xdl_delib_codehigh &lt;dbl&gt;, v2xdl_delib_sd &lt;dbl&gt;, v2x_egal &lt;dbl&gt;,
## #   v2x_egal_codelow &lt;dbl&gt;, v2x_egal_codehigh &lt;dbl&gt;, v2x_egal_sd &lt;dbl&gt;,
## #   v2xeg_eqprotec &lt;dbl&gt;, …
```
]

---

### Pick out columns with `select()`


```r
vd &lt;- as_tibble(vdem)
vd %&gt;% 
  select(country_text_id, year, e_regionpol_6C, v2x_polyarchy, e_migdppc)
```

```
## # A tibble: 27,192 x 5
##    country_text_id  year e_regionpol_6C v2x_polyarchy e_migdppc
##    &lt;chr&gt;           &lt;dbl&gt;          &lt;dbl&gt;         &lt;dbl&gt;     &lt;dbl&gt;
##  1 MEX              1789              2         0.026      1304
##  2 MEX              1790              2         0.026      1298
##  3 MEX              1791              2         0.026      1331
##  4 MEX              1792              2         0.026      1353
##  5 MEX              1793              2         0.026      1374
##  6 MEX              1794              2         0.026      1385
##  7 MEX              1795              2         0.026      1388
##  8 MEX              1796              2         0.026      1380
##  9 MEX              1797              2         0.026      1356
## 10 MEX              1798              2         0.026      1341
## # … with 27,182 more rows
```

---


### Pick out rows with `filter()`


```r
vd %&gt;% 
  select(country_text_id, year, e_regionpol_6C, v2x_polyarchy, e_migdppc) %&gt;% 
* filter(year == 2015)
```

```
## # A tibble: 179 x 5
##    country_text_id  year e_regionpol_6C v2x_polyarchy e_migdppc
##    &lt;chr&gt;           &lt;dbl&gt;          &lt;dbl&gt;         &lt;dbl&gt;     &lt;dbl&gt;
##  1 MEX              2015              2         0.631     16096
##  2 SUR              2015              2         0.777        NA
##  3 SWE              2015              5         0.915     43746
##  4 CHE              2015              5         0.901     59307
##  5 GHA              2015              4         0.724      3809
##  6 ZAF              2015              4         0.752     12246
##  7 JPN              2015              6         0.821     37031
##  8 MMR              2015              6         0.375      5021
##  9 RUS              2015              1         0.269     23691
## 10 ALB              2015              1         0.521     10032
## # … with 169 more rows
```

---

### Plotting democratization for each country 


```r
vd %&gt;% 
  filter(year &gt; 1900) %&gt;% 
  ggplot(aes(x = year, y = v2x_polyarchy, 
             group = country_name)) + 
  geom_line(alpha = .5)
```

&lt;img src="slides_21_files/figure-html/unnamed-chunk-8-1.png" style="display: block; margin: auto;" /&gt;

---

### Plotting democratization for each country (2)


```r
vd %&gt;% 
  filter(year &gt; 1900) %&gt;% 
  ggplot(aes(x = year, y = v2x_polyarchy, 
             group = country_name, 
             col = factor(e_regionpol_6C))) + 
  geom_line(alpha = .5) + 
  labs(col = "Region")
```

&lt;img src="slides_21_files/figure-html/unnamed-chunk-9-1.png" style="display: block; margin: auto;" /&gt;

---

### Extract column summaries with `summarize()`


```r
vd %&gt;% 
  filter(year == 2015) %&gt;% 
  summarize(mean_poly = mean(v2x_polyarchy, na.rm = T),
*           mean_gdppc = mean(e_migdppc, na.rm = T))
```

```
## # A tibble: 1 x 2
##   mean_poly mean_gdppc
##       &lt;dbl&gt;      &lt;dbl&gt;
## 1     0.528     18215.
```

--

A "base `R`" alternative: 


```r
apply(vd[vd$year == 2015, c("v2x_polyarchy", "e_migdppc")],
      2, mean, na.rm = T)
```

```
## v2x_polyarchy     e_migdppc 
##  5.275866e-01  1.821500e+04
```

---

### Why `na.rm = T`? 


```r
vd %&gt;% 
  filter(year == 2015) %&gt;% 
  summarize(mean_poly = mean(v2x_polyarchy),
            mean_gdppc = mean(e_migdppc)) 
```

```
## # A tibble: 1 x 2
##   mean_poly mean_gdppc
##       &lt;dbl&gt;      &lt;dbl&gt;
## 1     0.528         NA
```


---

### Grouped summaries


```r
vd %&gt;% 
* filter(year &gt; 1900) %&gt;%
* group_by(year) %&gt;%
  summarize(mean_poly = mean(v2x_polyarchy, na.rm = T),
            mean_gdppc = mean(e_migdppc, na.rm = T))
```

```
## # A tibble: 120 x 3
##     year mean_poly mean_gdppc
##    &lt;dbl&gt;     &lt;dbl&gt;      &lt;dbl&gt;
##  1  1901     0.148      3203.
##  2  1902     0.148      3209.
##  3  1903     0.147      3290.
##  4  1904     0.148      3310.
##  5  1905     0.148      3341.
##  6  1906     0.150      3431.
##  7  1907     0.150      3545.
##  8  1908     0.150      3504.
##  9  1909     0.152      3598.
## 10  1910     0.152      3630.
## # … with 110 more rows
```

---

### Plotting grouped summaries 



```r
vd %&gt;% 
  filter(year &gt; 1900) %&gt;% 
  group_by(year) %&gt;%
  summarize(mean_poly = mean(v2x_polyarchy, na.rm = T),
            mean_gdppc = mean(e_migdppc, na.rm = T)) %&gt;% 
* ggplot(aes(x = year, y = mean_poly)) +
* geom_line()
```

&lt;img src="slides_21_files/figure-html/unnamed-chunk-14-1.png" style="display: block; margin: auto;" /&gt;


---

### Alternative way to do something similar



```r
vd %&gt;% 
  filter(year &gt; 1900) %&gt;% 
* ggplot(aes(x = year, y = v2x_polyarchy)) +
* geom_smooth(span = .5)
```

&lt;img src="slides_21_files/figure-html/unnamed-chunk-15-1.png" style="display: block; margin: auto;" /&gt;


---


### Plotting grouped summaries (2)



```r
vd %&gt;% 
  filter(year &gt; 1900) %&gt;% 
  group_by(year) %&gt;%
  summarize(mean_poly = mean(v2x_polyarchy, na.rm = T),
            mean_gdppc = mean(e_migdppc, na.rm = T)) %&gt;% 
  mutate(my_size = ifelse(year %in% c(1946, 1960, 1989, 2018), 8, 0)) %&gt;% 
* ggplot(aes(x = mean_gdppc, y = mean_poly)) +
  geom_path() + 
  geom_point() + 
  geom_text(aes(label = year, size = my_size), show.legend=F)
```

&lt;img src="slides_21_files/figure-html/unnamed-chunk-16-1.png" style="display: block; margin: auto;" /&gt;


---


### Plotting grouped summaries (3)



```r
vd %&gt;% 
  filter(year &gt; 1900) %&gt;% 
* group_by(year, e_regionpol_6C) %&gt;%
  summarize(mean_poly = mean(v2x_polyarchy, na.rm = T),
            mean_gdppc = mean(e_migdppc, na.rm = T)) %&gt;% 
* ggplot(aes(x = year, y = mean_poly, col = factor(e_regionpol_6C))) +
  geom_line()
```

&lt;img src="slides_21_files/figure-html/unnamed-chunk-17-1.png" style="display: block; margin: auto;" /&gt;

???

1: Eastern Europe and Central Asia (including Mongolia and German Democratic Republic)
2: Latin America and the Caribbean
3: The Middle East and Northern Africa (including Israel and Turkey, excluding Cyprus)
4: Sub-Saharan Africa
5: Western Europe and North America (including Cyprus, Australia and New Zealand, but
excluding German Democratic Republic)
6: Asia and Pacific (excluding Australia and New Zealand; see 5)

---
class: inverse, middle, center

# Reshaping data (`pivot_longer()`, `pivot_wider()`, joins)

---


# Structure of "tidy" data

Each observation has a row, each attribute has a column.

--

Definition of "observation" may depend on application. 


---

## "Wide" version of the V-Dem data 


```
## # A tibble: 181 x 18
##    country_name  country_text_id polyarchy_1980 polyarchy_1985
##    &lt;chr&gt;         &lt;chr&gt;                    &lt;dbl&gt;          &lt;dbl&gt;
##  1 Mexico        MEX                      0.302          0.328
##  2 Suriname      SUR                      0.247          0.179
##  3 Sweden        SWE                      0.906          0.908
##  4 Switzerland   CHE                      0.872          0.87 
##  5 Ghana         GHA                      0.549          0.101
##  6 South Africa  ZAF                      0.166          0.183
##  7 Japan         JPN                      0.834          0.835
##  8 Burma/Myanmar MMR                      0.137          0.137
##  9 Russia        RUS                      0.11           0.112
## 10 Albania       ALB                      0.175          0.175
## # … with 171 more rows, and 14 more variables: polyarchy_1990 &lt;dbl&gt;,
## #   polyarchy_1995 &lt;dbl&gt;, polyarchy_2000 &lt;dbl&gt;, polyarchy_2005 &lt;dbl&gt;,
## #   polyarchy_2010 &lt;dbl&gt;, polyarchy_2015 &lt;dbl&gt;, gdppc_1980 &lt;dbl&gt;,
## #   gdppc_1985 &lt;dbl&gt;, gdppc_1990 &lt;dbl&gt;, gdppc_1995 &lt;dbl&gt;,
## #   gdppc_2000 &lt;dbl&gt;, gdppc_2005 &lt;dbl&gt;, gdppc_2010 &lt;dbl&gt;, gdppc_2015 &lt;dbl&gt;
```

&lt;!-- ## Plan  --&gt;

&lt;!-- First, examples where data columns already map to desired aesthetics 1 to 1. --&gt;

&lt;!-- - use (`gapminder`?) example to connect data to aesthetics (a la Heiss) --&gt;
&lt;!-- - introduce types of plots (from the cheatsheet?) --&gt;
&lt;!-- - `facet_wrap()`, `facet_grid()` --&gt;
&lt;!-- - practice and use examples --&gt;

&lt;!-- Then, cases where this is not true, and we need to do some data wrangling. --&gt;

&lt;!-- - making a new variable (`mutate()`) --&gt;
&lt;!-- - subsetting (`filter()`) --&gt;
&lt;!-- - summarizing? `group_by()`, `summarize()` --&gt;
&lt;!-- - `pivot_longer()`, `pivot_wider()` --&gt;

&lt;!-- but always ending with a figure I guess. --&gt;

&lt;!-- And that's basically it.  --&gt;
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "atelier-lakeside-light",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
