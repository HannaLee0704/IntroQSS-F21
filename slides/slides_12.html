<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Data visualization (session 1.2)</title>
    <meta charset="utf-8" />
    <link href="slides_12_files/remark-css-0.0.1/default.css" rel="stylesheet" />
    <link href="slides_12_files/remark-css-0.0.1/shinobi.css" rel="stylesheet" />
    <script src="slides_12_files/kePrint-0.0.1/kePrint.js"></script>
    <link href="slides_12_files/lightable-0.0.1/lightable.css" rel="stylesheet" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Data visualization (session 1.2)
## PLSC30500, Fall 2021

---





class: inverse, middle, center

# Toward a grammar of graphics

---

class: bg-full
background-image: url("assets/rosling_youtube.png")
background-position: center
background-size: contain

???

Source: https://www.youtube.com/watch?v=jbkSRLYSojo

---

class: bg-full
background-image: url("assets/rosling_youtube_zoom.png")
background-position: center
background-size: contain

???

Source: https://www.youtube.com/watch?v=jbkSRLYSojo

---

# Mapping attributes to aesthetics 

Q: What is the **unit of observation**? 

A: A country in a year

Q: How are a country-year's **attributes** mapped to **aesthetic** components of the graphic?

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; Attribute &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; Aesthetic &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Income &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Horizontal position (x) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Life expectancy &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Vertical position (y) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Population &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Size of point &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Continent &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Color of point &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;


---

class: bg-full
background-image: url("assets/Minard.png")
background-position: center
background-size: contain

### One of the "best statistical drawings ever created" (Tufte, *VDQI*): Minard's graphic on Napol√©on in Russia   

???

Source: [Wikipedia](https://en.wikipedia.org/wiki/File:Minard.png)


---


# Mapping attributes to aesthetics 

Q: What is the **unit of observation**? 

A: An army (army division) on a day ("army-day")

Q: How are an army-day's **attributes** mapped to **aesthetic** components of the graphic?

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; Attribute &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; Aesthetic &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Longitude &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Horizontal position (x) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Latitude &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Vertical position (y) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Number of surviving soldiers &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Width of line &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Direction (advance, retreat) &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Color of line &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

(Also note secondary plot showing temperature during retreat.)

---

# Data: structure

Our data is typically **rectangular**, with rows and columns like a spreadsheet.

--

Usually, 

- each row should be one observation (e.g. country-year, army-day)
- each column should contain one attribute (e.g. life expectancy, number of surviving troops)

--

For example: 

&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; country &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; continent &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; lifeExp &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; pop &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; gdpPercap &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Afghanistan &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Asia &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 43.828 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 31889923 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 974.5803 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Albania &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Europe &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 76.423 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 3600523 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 5937.0295 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Algeria &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Africa &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 72.301 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 33333216 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 6223.3675 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Angola &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Africa &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 42.731 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 12420476 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 4797.2313 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Argentina &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Americas &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 75.320 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 40301927 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 12779.3796 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Australia &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Oceania &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 81.235 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 20434176 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 34435.3674 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Austria &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Europe &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 79.829 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 8199783 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 36126.4927 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Bahrain &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Asia &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 75.635 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 708573 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 29796.0483 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Bangladesh &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Asia &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 64.062 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 150448339 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1391.2538 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Belgium &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; Europe &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 79.441 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 10392226 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 33692.6051 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

???

Data in this format is sometimes referred to as "tidy" [(Wickham 2014)](https://vita.had.co.nz/papers/tidy-data.pdf). I think this concept is useful as long as you recognize that the definition of "unit of observation" (and thus attribute/variable) depends on the purpose for which the data is being used.

---


class: inverse, middle, center

# Making (beautiful and informative) graphics

---

# Making graphics in `R` 

We will use the `ggplot2` library, which is part of the `tidyverse` library.

Basic components of plotting with `ggplot`: 

- data 
- mapping of attributes (columns of data) to aesthetics
- geometric representations of data (`geom`s)



---

class: inverse, middle, center

# Quick detour: getting data into `R`

---

# Getting data into `R` (and `RStudio`)

An interactive option: `Import Dataset` button in `Environment` pane of `RStudio`

--

But note it's showing you the code it's using! 

(Live coding example.)

---

# Getting data into `R` (cont'd)

Most commonly used functions: 

- `read_csv()` and `read_rds()` in `readr` (`tidyverse`)
- `readstata13::read.dta13()` for Stata files (`.dta`)
- `readxl::read_excel()` for Excel files (`.xls`, `.xlsx`)
- `load()` in base R for "R objects"

All require "path" to file as argument. 

--

Sometimes data is a package, e.g. `babynames`, `gapminder`, `vdemdata` 

--

See Chapter 11 of R4DS and "Data Import" cheatsheet.


---

## A simple example

Get data in: 


```r
gapminder_2007 &lt;- gapminder::gapminder %&gt;% 
  filter(year == 2007 &amp; continent != "Oceania")   # will explain next week
```

Make a plot:


```r
ggplot(data = gapminder_2007, 
       mapping = aes(x = gdpPercap, y = lifeExp)) + 
  geom_point()
```


---


```r
ggplot(data = gapminder_2007, 
       mapping = aes(x = gdpPercap, y = lifeExp)) + 
  geom_point()
```

&lt;img src="slides_12_files/figure-html/unnamed-chunk-6-1.png" style="display: block; margin: auto;" /&gt;

To note:

- the **arguments** to `ggplot()` say what the data is (`data = gapminder_2007`) and how attributes are mapped to aesthetics (`mapping = aes(x = gdpPercap, y = lifeExp)`)
- `geom_point()` says "plot a point for each observation"
- **layers** of plot linked with plus sign (`+`)


---

&lt;!-- Let's map population to the size of the points:  --&gt;


```r
ggplot(data = gapminder_2007, 
       mapping = aes(x = gdpPercap, y = lifeExp,
*                    size = pop)) +
  geom_point()
```

&lt;img src="slides_12_files/figure-html/unnamed-chunk-7-1.png" style="display: block; margin: auto;" /&gt;

---

&lt;!-- Let's map continent to the color of the points:  --&gt;


```r
ggplot(data = gapminder_2007, 
       mapping = aes(x = gdpPercap, y = lifeExp,
                     size = pop,
*                    col = continent)) +
  geom_point()
```

&lt;img src="slides_12_files/figure-html/unnamed-chunk-8-1.png" style="display: block; margin: auto;" /&gt;

---

&lt;!-- Let's put the x-axis on the log scale:  --&gt;


```r
ggplot(data = gapminder_2007, 
       mapping = aes(x = gdpPercap, y = lifeExp,
                     size = pop,
                     col = continent)) +  
  geom_point() + 
* scale_x_log10()
```

&lt;img src="slides_12_files/figure-html/unnamed-chunk-9-1.png" style="display: block; margin: auto;" /&gt;


---

# Minard data 



&lt;table&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:right;"&gt; long &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; lat &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; survivors &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; direction &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; group &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 24.0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 54.9 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 340000 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; A &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 24.5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 55.0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 340000 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; A &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 25.5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 54.5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 340000 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; A &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 26.0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 54.7 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 320000 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; A &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 27.0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 54.8 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 300000 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; A &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 28.0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 54.9 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 280000 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; A &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 28.5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 55.0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 240000 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; A &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 29.0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 55.1 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 210000 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; A &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 30.0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 55.2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 180000 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; A &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 30.3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 55.3 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 175000 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; A &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 32.0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 54.8 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 145000 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; A &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 33.2 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 54.9 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 140000 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; A &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 34.4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 55.5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 127100 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; A &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 35.5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 55.4 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 100000 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; A &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 36.0 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 55.5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 100000 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; A &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 37.6 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 55.8 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 100000 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; A &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 37.7 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 55.7 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 100000 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; R &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:right;"&gt; 37.5 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 55.7 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 98000 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; R &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

---


```r
ggplot(data = minard,
       mapping = aes(x = long, y = lat, 
                     size = survivors, col = direction,
                     group = group)) + 
  geom_path()
```

![](slides_12_files/figure-html/unnamed-chunk-12-1.png)&lt;!-- --&gt;


???

"`geom_path()` connects the observations in the order in which they appear in the data. `geom_line()` connects them in order of the variable on the x axis. `geom_step()` creates a stairstep plot, highlighting exactly when changes occur."

Source: https://ggplot2.tidyverse.org/reference/geom_path.html

---


# Back to `gapminder`


```r
ggplot(data = gapminder_2007, 
       mapping = aes(x = gdpPercap, y = lifeExp,
                     size = pop, col = continent)) +  
  geom_point() +   
  scale_x_log10() 
```

&lt;img src="slides_12_files/figure-html/unnamed-chunk-13-1.png" style="display: block; margin: auto;" /&gt;

---

# Adding a smoothing line

`geom_smooth()` adds a "smoother". Let's try adding it!

--


```r
ggplot(data = gapminder_2007, 
       mapping = aes(x = gdpPercap, y = lifeExp,
                     size = pop, col = continent)) +  
  geom_point() +   
  scale_x_log10() + 
* geom_smooth()
```

&lt;img src="slides_12_files/figure-html/unnamed-chunk-14-1.png" style="display: block; margin: auto;" /&gt;

Hmm.

??? If you don't exclude Oceania, `ggplot` refuses to make a smoother using default settings because there are too few countries in Oceania.

---

# Inheritance of aesthetics 


```r
ggplot(data = gapminder_2007, 
       mapping = aes(x = gdpPercap, y = lifeExp, size = pop)) +  
* geom_point(aes(col = continent)) +
  scale_x_log10() 
```

&lt;img src="slides_12_files/figure-html/unnamed-chunk-15-1.png" style="display: block; margin: auto;" /&gt;

---

# Data summary w. `geom_smooth()` 



```r
ggplot(data = gapminder_2007, 
       mapping = aes(x = gdpPercap, y = lifeExp, size = pop)) +  
  geom_point(aes(col = continent)) + 
  scale_x_log10() +
* geom_smooth()
```

&lt;img src="slides_12_files/figure-html/unnamed-chunk-16-1.png" style="display: block; margin: auto;" /&gt;

---

# Linear version w. `geom_smooth()` 



```r
ggplot(data = gapminder_2007, 
       mapping = aes(x = gdpPercap, y = lifeExp, size = pop)) +  
  geom_point(aes(col = continent)) + 
  scale_x_log10() +
* geom_smooth(method = lm) # lm means "linear model"
```

&lt;img src="slides_12_files/figure-html/unnamed-chunk-17-1.png" style="display: block; margin: auto;" /&gt;


???

Anything after # (on the same line) is a "comment" and is ignored by R. This is useful for explaining to humans what is going on in the code.

---

# Small multiples w. `facet_wrap()` 


```r
ggplot(data = gapminder_2007, 
       mapping = aes(x = gdpPercap, y = lifeExp)) +  
  geom_point(aes(size = pop)) + 
  scale_x_log10() +
  geom_smooth(method = lm) +
* facet_wrap(vars(continent))
```

&lt;img src="slides_12_files/figure-html/unnamed-chunk-18-1.png" style="display: block; margin: auto;" /&gt;

---

# Other geoms 


```r
ggplot(data = gapminder_2007, 
       mapping = aes(x = gdpPercap, y = lifeExp)) +  
* geom_density2d() +
  scale_x_log10()
```

&lt;img src="slides_12_files/figure-html/unnamed-chunk-19-1.png" style="display: block; margin: auto;" /&gt;



---

# Other geoms 


```r
ggplot(data = gapminder_2007, 
       mapping = aes(x = gdpPercap, y = lifeExp)) +  
* geom_label(aes(label = country)) +
  scale_x_log10()
```

&lt;img src="slides_12_files/figure-html/unnamed-chunk-20-1.png" style="display: block; margin: auto;" /&gt;

---

# How to learn more 

Practice and experiment. (And do problem sets.) 

Resources: 

- *R For Data Science*
- RStudio primers
- RStudio "Data Visualization" cheat sheet
- Google
- StackOverflow

---

class: bg-full
background-image: url("assets/data_viz_cheatsheet.png")
background-position: center
background-size: contain

???

Source: [RStudio Cheatsheets](https://www.rstudio.com/resources/cheatsheets/)



---

# Back to the big picture 

Components of a `ggplot`: 

- data, with observations in rows, attributes in columns
- mapping of attributes to aesthetics (x, y, size, shape, color, transparency, etc)
- geometric objects (`geom`s)

Next: getting data into the right format for plotting (and analysis).

---


&lt;!-- # Digression about coding vs clicking --&gt;


&lt;!-- --- --&gt;

# Assignment

Before next lecture, RStudio Cloud primers: 

- "Work with data" (https://rstudio.cloud/learn/primers/2): `tibble`, `select()`, `filter()`, `arrange()`, `%&gt;%`, `summarize()`, `group_by()`, `mutate()`
- "Data vizualization" (https://rstudio.cloud/learn/primers/3): more practice with `ggplot`

Alternatively, Chapters 5&amp;6 of R4DS. 



&lt;!-- ## Plan  --&gt;

&lt;!-- First, examples where data columns already map to desired aesthetics 1 to 1. --&gt;

&lt;!-- - use (`gapminder`?) example to connect data to aesthetics (a la Heiss) --&gt;
&lt;!-- - introduce types of plots (from the cheatsheet?) --&gt;
&lt;!-- - `facet_wrap()`, `facet_grid()` --&gt;
&lt;!-- - practice and use examples --&gt;

&lt;!-- Then, cases where this is not true, and we need to do some data wrangling. --&gt;

&lt;!-- - making a new variable (`mutate()`) --&gt;
&lt;!-- - subsetting (`filter()`) --&gt;
&lt;!-- - summarizing? `group_by()`, `summarize()` --&gt;
&lt;!-- - `pivot_longer()`, `pivot_wider()` --&gt;

&lt;!-- but always ending with a figure I guess. --&gt;

&lt;!-- And that's basically it.  --&gt;
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "atelier-lakeside-light",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
